<?php

$list = array("http://projects.dfid.gov.uk/iati/NonIATI/NS"
,"http://projects.dfid.gov.uk/iati/Region/298"
,"http://projects.dfid.gov.uk/iati/Country/PK"
,"http://projects.dfid.gov.uk/iati/NonIATI/ZZ"
,"http://projects.dfid.gov.uk/iati/Country/IN"
,"http://projects.dfid.gov.uk/iati/Country/BD"
,"http://projects.dfid.gov.uk/iati/Country/KE"
,"http://projects.dfid.gov.uk/iati/Country/UG"
,"http://projects.dfid.gov.uk/iati/Country/AF"
,"http://projects.dfid.gov.uk/iati/Country/NP"
,"http://projects.dfid.gov.uk/iati/Country/MW"
,"http://projects.dfid.gov.uk/iati/Country/SL"
,"http://projects.dfid.gov.uk/iati/Country/NG"
,"http://projects.dfid.gov.uk/iati/Country/SD"
,"http://projects.dfid.gov.uk/iati/Country/ET"
,"http://projects.dfid.gov.uk/iati/Country/ZW"
,"http://projects.dfid.gov.uk/iati/Country/MM"
,"http://projects.dfid.gov.uk/iati/Country/CD"
,"http://projects.dfid.gov.uk/iati/Country/TZ"
,"http://projects.dfid.gov.uk/iati/Country/CN"
,"http://projects.dfid.gov.uk/iati/Country/SO"
,"http://projects.dfid.gov.uk/iati/Country/GH"
,"http://projects.dfid.gov.uk/iati/Country/ZM"
,"http://projects.dfid.gov.uk/iati/Country/RW"
,"http://projects.dfid.gov.uk/iati/Country/SH"
,"http://projects.dfid.gov.uk/iati/Country/MS"
,"http://projects.dfid.gov.uk/iati/Country/MZ"
,"http://projects.dfid.gov.uk/iati/Country/PS"
,"http://projects.dfid.gov.uk/iati/Country/ID"
,"http://projects.dfid.gov.uk/iati/Country/TJ"
,"http://projects.dfid.gov.uk/iati/NonIATI/NULL"
,"http://projects.dfid.gov.uk/iati/Country/VN"
,"http://projects.dfid.gov.uk/iati/Country/BI"
,"http://projects.dfid.gov.uk/iati/Country/YE"
,"http://projects.dfid.gov.uk/iati/Country/LK"
,"http://projects.dfid.gov.uk/iati/Region/380"
,"http://projects.dfid.gov.uk/iati/Country/ZA"
,"http://projects.dfid.gov.uk/iati/Country/KH"
,"http://projects.dfid.gov.uk/iati/NonIATI/OT"
,"http://projects.dfid.gov.uk/iati/Region/289"
,"http://projects.dfid.gov.uk/iati/Country/HT"
,"http://projects.dfid.gov.uk/iati/Region/798"
,"http://projects.dfid.gov.uk/iati/Country/BA"
,"http://projects.dfid.gov.uk/iati/Country/IQ"
,"http://projects.dfid.gov.uk/iati/Country/MD"
,"http://projects.dfid.gov.uk/iati/NonIATI/KO"
,"http://projects.dfid.gov.uk/iati/Country/BR"
,"http://projects.dfid.gov.uk/iati/Country/RS"
,"http://projects.dfid.gov.uk/iati/Country/LR"
,"http://projects.dfid.gov.uk/iati/Country/KG"
,"http://projects.dfid.gov.uk/iati/NonIATI/FA"
,"http://projects.dfid.gov.uk/iati/NonIATI/AC"
,"http://projects.dfid.gov.uk/iati/Country/LS"
,"http://projects.dfid.gov.uk/iati/Country/GM"
,"http://projects.dfid.gov.uk/iati/Country/GY"
,"http://projects.dfid.gov.uk/iati/Country/PN"
,"http://projects.dfid.gov.uk/iati/NonIATI/EA"
,"http://projects.dfid.gov.uk/iati/Country/SH"
,"http://projects.dfid.gov.uk/iati/Country/JM"
,"http://projects.dfid.gov.uk/iati/Region/589"
,"http://projects.dfid.gov.uk/iati/Country/AO"
,"http://projects.dfid.gov.uk/iati/Country/NI"
,"http://projects.dfid.gov.uk/iati/Country/TD"
,"http://projects.dfid.gov.uk/iati/Country/RU"
,"http://projects.dfid.gov.uk/iati/Country/GB"
,"http://projects.dfid.gov.uk/iati/NonIATI/BL"
,"http://projects.dfid.gov.uk/iati/Country/AL"
,"http://projects.dfid.gov.uk/iati/Country/ER"
,"http://projects.dfid.gov.uk/iati/Country/PE"
,"http://projects.dfid.gov.uk/iati/Region/89"
,"http://projects.dfid.gov.uk/iati/Country/SH"
,"http://projects.dfid.gov.uk/iati/Country/CM"
,"http://projects.dfid.gov.uk/iati/Country/MG"
,"http://projects.dfid.gov.uk/iati/Country/NE"
,"http://projects.dfid.gov.uk/iati/Country/PG"
,"http://projects.dfid.gov.uk/iati/Country/TC"
,"http://projects.dfid.gov.uk/iati/NonIATI/EF"
,"http://projects.dfid.gov.uk/iati/NonIATI/SS"
,"http://projects.dfid.gov.uk/iati/Country/CF"
,"http://projects.dfid.gov.uk/iati/Country/EC"
,"http://projects.dfid.gov.uk/iati/Country/GT"
,"http://projects.dfid.gov.uk/iati/Country/UA"
,"http://projects.dfid.gov.uk/iati/Region/189"
,"http://projects.dfid.gov.uk/iati/NonIATI/LE"
,"http://projects.dfid.gov.uk/iati/Country/BF"
,"http://projects.dfid.gov.uk/iati/Country/CL"
,"http://projects.dfid.gov.uk/iati/Country/CG"
,"http://projects.dfid.gov.uk/iati/Country/LA"
,"http://projects.dfid.gov.uk/iati/Country/PH"
,"http://projects.dfid.gov.uk/iati/Country/SN"
,"http://projects.dfid.gov.uk/iati/NonIATI/IB"
,"http://projects.dfid.gov.uk/iati/NonIATI/EB"
,"http://projects.dfid.gov.uk/iati/Country/BJ"
,"http://projects.dfid.gov.uk/iati/Country/BT"
,"http://projects.dfid.gov.uk/iati/Country/BO"
,"http://projects.dfid.gov.uk/iati/Country/CV"
,"http://projects.dfid.gov.uk/iati/Country/DK"
,"http://projects.dfid.gov.uk/iati/Country/TL"
,"http://projects.dfid.gov.uk/iati/Country/FJ"
,"http://projects.dfid.gov.uk/iati/Country/GE"
,"http://projects.dfid.gov.uk/iati/Country/GI"
,"http://projects.dfid.gov.uk/iati/Country/GN"
,"http://projects.dfid.gov.uk/iati/Country/HN"
,"http://projects.dfid.gov.uk/iati/Country/JO"
,"http://projects.dfid.gov.uk/iati/Country/MV"
,"http://projects.dfid.gov.uk/iati/Country/MN"
,"http://projects.dfid.gov.uk/iati/Country/NA"
,"http://projects.dfid.gov.uk/iati/Country/AS"
,"http://projects.dfid.gov.uk/iati/Country/LC"
,"http://projects.dfid.gov.uk/iati/Country/TH"
,"http://projects.dfid.gov.uk/iati/Country/TR"
,"http://projects.dfid.gov.uk/iati/Country/VU"
,"http://projects.dfid.gov.uk/iati/Country/WS"
,"http://projects.dfid.gov.uk/iati/NonIATI/CP"
,"http://projects.dfid.gov.uk/iati/NonIATI/CB"
,"http://projects.dfid.gov.uk/iati/NonIATI/ED"
,"http://projects.dfid.gov.uk/iati/NonIATI/SU"
,"http://projects.dfid.gov.uk/iati/NonIATI/SQ"
,"http://projects.dfid.gov.uk/iati/Country/DZ"
,"http://projects.dfid.gov.uk/iati/Country/AD"
,"http://projects.dfid.gov.uk/iati/Country/AI"
,"http://projects.dfid.gov.uk/iati/Country/AG"
,"http://projects.dfid.gov.uk/iati/Country/AR"
,"http://projects.dfid.gov.uk/iati/Country/AM"
,"http://projects.dfid.gov.uk/iati/Country/AU"
,"http://projects.dfid.gov.uk/iati/Country/AT"
,"http://projects.dfid.gov.uk/iati/Country/AZ"
,"http://projects.dfid.gov.uk/iati/Country/BS"
,"http://projects.dfid.gov.uk/iati/Country/BH"
,"http://projects.dfid.gov.uk/iati/Country/BB"
,"http://projects.dfid.gov.uk/iati/Country/BY"
,"http://projects.dfid.gov.uk/iati/Country/BE"
,"http://projects.dfid.gov.uk/iati/Country/BZ"
,"http://projects.dfid.gov.uk/iati/Country/BM"
,"http://projects.dfid.gov.uk/iati/Country/BW"
,"http://projects.dfid.gov.uk/iati/Country/BV"
,"http://projects.dfid.gov.uk/iati/Country/AQ"
,"http://projects.dfid.gov.uk/iati/Country/IO"
,"http://projects.dfid.gov.uk/iati/Country/VG"
,"http://projects.dfid.gov.uk/iati/Country/BN"
,"http://projects.dfid.gov.uk/iati/Country/BG"
,"http://projects.dfid.gov.uk/iati/Country/CA"
,"http://projects.dfid.gov.uk/iati/Country/KY"
,"http://projects.dfid.gov.uk/iati/Country/CX"
,"http://projects.dfid.gov.uk/iati/Country/CC"
,"http://projects.dfid.gov.uk/iati/Country/CO"
,"http://projects.dfid.gov.uk/iati/Country/KM"
,"http://projects.dfid.gov.uk/iati/Country/CK"
,"http://projects.dfid.gov.uk/iati/Country/CR"
,"http://projects.dfid.gov.uk/iati/Country/CI"
,"http://projects.dfid.gov.uk/iati/Country/HR"
,"http://projects.dfid.gov.uk/iati/Country/CU"
,"http://projects.dfid.gov.uk/iati/Country/CY"
,"http://projects.dfid.gov.uk/iati/Country/CZ"
,"http://projects.dfid.gov.uk/iati/Country/KP"
,"http://projects.dfid.gov.uk/iati/Country/DJ"
,"http://projects.dfid.gov.uk/iati/Country/DM"
,"http://projects.dfid.gov.uk/iati/Country/DO"
,"http://projects.dfid.gov.uk/iati/Country/EG"
,"http://projects.dfid.gov.uk/iati/Country/SV"
,"http://projects.dfid.gov.uk/iati/Country/GQ"
,"http://projects.dfid.gov.uk/iati/Country/EE"
,"http://projects.dfid.gov.uk/iati/Country/FO"
,"http://projects.dfid.gov.uk/iati/Country/FK"
,"http://projects.dfid.gov.uk/iati/Country/FI"
,"http://projects.dfid.gov.uk/iati/Country/FR"
,"http://projects.dfid.gov.uk/iati/Country/GF"
,"http://projects.dfid.gov.uk/iati/Country/PF"
,"http://projects.dfid.gov.uk/iati/Country/TF"
,"http://projects.dfid.gov.uk/iati/Country/GA"
,"http://projects.dfid.gov.uk/iati/Country/DE"
,"http://projects.dfid.gov.uk/iati/Country/GR"
,"http://projects.dfid.gov.uk/iati/Country/GL"
,"http://projects.dfid.gov.uk/iati/Country/GD"
,"http://projects.dfid.gov.uk/iati/Country/GP"
,"http://projects.dfid.gov.uk/iati/Country/GU"
,"http://projects.dfid.gov.uk/iati/Country/GG"
,"http://projects.dfid.gov.uk/iati/Country/GW"
,"http://projects.dfid.gov.uk/iati/Country/HM"
,"http://projects.dfid.gov.uk/iati/Country/HK"
,"http://projects.dfid.gov.uk/iati/Country/HU"
,"http://projects.dfid.gov.uk/iati/Country/IS"
,"http://projects.dfid.gov.uk/iati/Country/IR"
,"http://projects.dfid.gov.uk/iati/Country/IE"
,"http://projects.dfid.gov.uk/iati/Country/IM"
,"http://projects.dfid.gov.uk/iati/Country/IL"
,"http://projects.dfid.gov.uk/iati/Country/IT"
,"http://projects.dfid.gov.uk/iati/Country/JP"
,"http://projects.dfid.gov.uk/iati/Country/KH"
,"http://projects.dfid.gov.uk/iati/Country/KZ"
,"http://projects.dfid.gov.uk/iati/Country/KI"
,"http://projects.dfid.gov.uk/iati/Country/KR"
,"http://projects.dfid.gov.uk/iati/Country/KW"
,"http://projects.dfid.gov.uk/iati/Country/LV"
,"http://projects.dfid.gov.uk/iati/Country/LB"
,"http://projects.dfid.gov.uk/iati/Country/LY"
,"http://projects.dfid.gov.uk/iati/Country/LI"
,"http://projects.dfid.gov.uk/iati/Country/LT"
,"http://projects.dfid.gov.uk/iati/Country/LU"
,"http://projects.dfid.gov.uk/iati/Country/MO"
,"http://projects.dfid.gov.uk/iati/Country/MK"
,"http://projects.dfid.gov.uk/iati/Country/MY"
,"http://projects.dfid.gov.uk/iati/Country/ML"
,"http://projects.dfid.gov.uk/iati/Country/MT"
,"http://projects.dfid.gov.uk/iati/Country/MH"
,"http://projects.dfid.gov.uk/iati/Country/MQ"
,"http://projects.dfid.gov.uk/iati/Country/MR"
,"http://projects.dfid.gov.uk/iati/Country/MU"
,"http://projects.dfid.gov.uk/iati/Country/MX"
,"http://projects.dfid.gov.uk/iati/Country/FM"
,"http://projects.dfid.gov.uk/iati/Country/MC"
,"http://projects.dfid.gov.uk/iati/Country/ME"
,"http://projects.dfid.gov.uk/iati/Country/MA"
,"http://projects.dfid.gov.uk/iati/Country/NR"
,"http://projects.dfid.gov.uk/iati/Country/NL"
,"http://projects.dfid.gov.uk/iati/Country/AN"
,"http://projects.dfid.gov.uk/iati/Country/NC"
,"http://projects.dfid.gov.uk/iati/Country/NZ"
,"http://projects.dfid.gov.uk/iati/Country/NU"
,"http://projects.dfid.gov.uk/iati/Country/NF"
,"http://projects.dfid.gov.uk/iati/Country/NO"
,"http://projects.dfid.gov.uk/iati/Country/OM"
,"http://projects.dfid.gov.uk/iati/Country/PW"
,"http://projects.dfid.gov.uk/iati/Country/PA"
,"http://projects.dfid.gov.uk/iati/Country/PY"
,"http://projects.dfid.gov.uk/iati/Country/PL"
,"http://projects.dfid.gov.uk/iati/Country/PT"
,"http://projects.dfid.gov.uk/iati/Country/PR"
,"http://projects.dfid.gov.uk/iati/Country/QA"
,"http://projects.dfid.gov.uk/iati/Country/RE"
,"http://projects.dfid.gov.uk/iati/Country/RO"
,"http://projects.dfid.gov.uk/iati/Country/KN"
,"http://projects.dfid.gov.uk/iati/Country/SM"
,"http://projects.dfid.gov.uk/iati/Country/ST"
,"http://projects.dfid.gov.uk/iati/Country/SA"
,"http://projects.dfid.gov.uk/iati/Country/SC"
,"http://projects.dfid.gov.uk/iati/Country/SG"
,"http://projects.dfid.gov.uk/iati/Country/SK"
,"http://projects.dfid.gov.uk/iati/Country/SI"
,"http://projects.dfid.gov.uk/iati/Country/SB"
,"http://projects.dfid.gov.uk/iati/Country/ES"
,"http://projects.dfid.gov.uk/iati/Country/PM"
,"http://projects.dfid.gov.uk/iati/Country/VC"
,"http://projects.dfid.gov.uk/iati/Country/SR"
,"http://projects.dfid.gov.uk/iati/Country/SJ"
,"http://projects.dfid.gov.uk/iati/Country/SZ"
,"http://projects.dfid.gov.uk/iati/Country/SE"
,"http://projects.dfid.gov.uk/iati/Country/CH"
,"http://projects.dfid.gov.uk/iati/Country/SY"
,"http://projects.dfid.gov.uk/iati/Country/TW"
,"http://projects.dfid.gov.uk/iati/Country/TG"
,"http://projects.dfid.gov.uk/iati/Country/TK"
,"http://projects.dfid.gov.uk/iati/Country/TO"
,"http://projects.dfid.gov.uk/iati/Country/TT"
,"http://projects.dfid.gov.uk/iati/Country/TN"
,"http://projects.dfid.gov.uk/iati/Country/TM"
,"http://projects.dfid.gov.uk/iati/Country/TV"
,"http://projects.dfid.gov.uk/iati/Country/AE"
,"http://projects.dfid.gov.uk/iati/Country/US"
,"http://projects.dfid.gov.uk/iati/Country/UY"
,"http://projects.dfid.gov.uk/iati/Country/UM"
,"http://projects.dfid.gov.uk/iati/Country/VI"
,"http://projects.dfid.gov.uk/iati/Country/UZ"
,"http://projects.dfid.gov.uk/iati/Country/VA"
,"http://projects.dfid.gov.uk/iati/Country/VE"
,"http://projects.dfid.gov.uk/iati/Country/WF"
,"http://projects.dfid.gov.uk/iati/Country/EH"
,"http://projects.dfid.gov.uk/iati/Region/498"
,"http://projects.dfid.gov.uk/iati/Region/889"
,"http://projects.dfid.gov.uk/iati/NonIATI/CT"
,"http://projects.dfid.gov.uk/iati/NonIATI/CS"
,"http://projects.dfid.gov.uk/iati/NonIATI/JT"
,"http://projects.dfid.gov.uk/iati/NonIATI/MI"
,"http://projects.dfid.gov.uk/iati/NonIATI/PC"
,"http://projects.dfid.gov.uk/iati/NonIATI/SF"
,"http://projects.dfid.gov.uk/iati/NonIATI/WK"
,"http://projects.dfid.gov.uk/iati/NonIATI/WI"
,"http://projects.dfid.gov.uk/iati/NonIATI/YD"
,"http://projects.dfid.gov.uk/iati/NonIATI/YU"
,"http://projects.dfid.gov.uk/iati/NonIATI/ZR"
,"http://projects.dfid.gov.uk/iati/NonIATI/BK"
,"http://projects.dfid.gov.uk/iati/NonIATI/CJ"
,"http://projects.dfid.gov.uk/iati/NonIATI/GS"
,"http://projects.dfid.gov.uk/iati/NonIATI/SW"
,"http://projects.dfid.gov.uk/iati/NonIATI/AB"
,"http://projects.dfid.gov.uk/iati/NonIATI/NT"
,"http://projects.dfid.gov.uk/iati/NonIATI/WN");

$age = 86400;

foreach($list as $url) {
   $cache = md5($url);
   $filename = "../cache/urls/$cache.cache";

  if (file_exists($filename)) {
    $mtime = filemtime($filename);
    $fileage = time() - mtime;
    if ($fileage>$age) {
	echo "Cached copy of $url is ok\n";
    } else {
	echo "Fetching new copy of $url\n";
      $file = cleanXML(file_get_contents($url));
      file_put_contents($filename,$file);
    }
  } else {
	echo "We need a copy of $url \n";
      $file = cleanXML(file_get_contents($url));
      file_put_contents($filename,$file);
  }

}

//Handle non UTF-8 encoding in the XML http://www.w3.org/TR/1999/WD-xml-c14n-19991109.html
function cleanXML($file) {
   $replace = array("&#xD;","&#x9;","&#xA;");
   return str_replace($replace," ",$file);
}



?>
